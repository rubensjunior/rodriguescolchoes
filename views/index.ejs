<!-- Wappler include head-page="layouts/main" fontawesome_5="cdn" bootstrap5="local" is="dmx-app" id="index" appConnect="local" components="{dmxBootstrap5Modal:{},dmxFormatter:{}}" -->

<style>
    /* Estilo para imagem de perfil no modal QR Code */
    .profile-image {
        width: 280px !important;
        height: 350px !important;
        /* Propor√ß√£o 4:5 (280x350) */
        max-width: 280px !important;
        max-height: 350px !important;
        border-radius: 8px;
        object-fit: cover;
        border: 4px solid #fff;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        margin-bottom: 1rem;
        display: block !important;
        transition: all 0.3s ease;
        background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        margin-left: auto !important;
        margin-right: auto !important;
        visibility: visible !important;
        opacity: 1 !important;
        position: relative;
    }

    .profile-image::before {
        content: "üì∑";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 2rem;
        color: #1976d2;
        z-index: 1;
    }

    .profile-image[src]:not([src=""]) {
        background: none;
    }

    .profile-image[src]:not([src=""])::before {
        display: none;
    }

    .profile-image:hover {
        transform: scale(1.02);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    }

    .qr-code-image {
        width: 280px !important;
        height: auto;
        margin-left: auto !important;
        margin-right: auto !important;
        display: block !important;
    }

    /* Tablet */
    @media (min-width: 768px) and (max-width: 991.98px) {
        .profile-image {
            width: 300px !important;
            height: 375px !important;
            max-width: 300px !important;
            max-height: 375px !important;
        }

        .profile-image::before {
            font-size: 2.2rem;
        }

        .qr-code-image {
            width: 300px !important;
        }
    }

    /* Desktop */
    @media (min-width: 992px) {
        .profile-image {
            width: 320px !important;
            height: 400px !important;
            max-width: 320px !important;
            max-height: 400px !important;
        }

        .profile-image::before {
            font-size: 2.5rem;
        }

        .qr-code-image {
            width: 320px !important;
        }
    }

    /* Mobile */
    @media (max-width: 767.98px) {
        .profile-image {
            width: 250px !important;
            height: 312px !important;
            max-width: 250px !important;
            max-height: 312px !important;
        }

        .profile-image::before {
            font-size: 1.8rem;
        }

        .qr-code-image {
            width: 250px !important;
        }
    }

    /* Mobile pequeno */
    @media (max-width: 575.98px) {
        .profile-image {
            width: 220px !important;
            height: 275px !important;
            max-width: 220px !important;
            max-height: 275px !important;
        }

        .profile-image::before {
            font-size: 1.5rem;
        }

        .qr-code-image {
            width: 220px !important;
        }
    }
</style>

<dmx-serverconnect id="buscar_qrcode" url="/api/colaborador/indentificar-colaborador-cpf" noload="true"></dmx-serverconnect>
<div class="modal" id="modal1" is="dmx-bs5-modal" tabindex="-1">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Meu QRCODE</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" dmx-on:click="form1.reset()"></button>
            </div>
            <div class="modal-body text-center">
                <form id="form1">
                    <div class="form-group mb-3"> <label for="cpf" class="form-label">Insira seu CPF</label>
                        <input type="text" class="form-control" id="cpf" name="cpf" aria-describedby="input1_help" placeholder="XXX.XXX.XXX-XX">
                    </div>
                </form>
                <div dmx-show="!buscar_qrcode.data.query.isEmpty()">
                    <img class="profile-image" dmx-bind:src="buscar_qrcode.data.query.imagem_perfil" alt="Foto do Colaborador" onerror="this.style.border='4px solid #f44336'; this.style.background='#ffebee';">
                    <img dmx-bind:src="'data:image/png;base64,' + buscar_qrcode.data.query.base64" class="img-fluid qr-code-image mb-3" alt="QR Code de Acesso">
                    <h5 class="text-start">Nome: {{buscar_qrcode.data.query.nome_colaborador}}</h5>
                    <h5 class="text-start">CPF: {{buscar_qrcode.data.query.cpf}}</h5>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" dmx-on:click="form1.reset()">Cancelar</button>
                <button type="button" class="btn btn-primary" dmx-on:click="buscar_qrcode.load({cpf: form1.cpf.value})">Ver meu QRCODE</button>
            </div>
        </div>
    </div>
</div>
<div class="container-fluid pt-3 ps-4 pe-4">
    <div class="row h-100 justify-content-center align-items-center bg-light rounded-4 py-5">
        <div class="col-md-9 text-center">
            <h1 class="mb-3">Bem-vindo ao Futuro da Gest√£o na Rodrigues Colch√µes</h1>
            <p class="fs-4">Um novo sistema que reflete nosso compromisso com a inova√ß√£o, a efici√™ncia e o crescimento sustent√°vel. Porque evoluir faz parte da nossa ess√™ncia.</p>
            <button id="btn1" class="btn btn-primary" dmx-on:click="navegacao.goto('/f/criar-conta',true)">Crie sua conta</button>
            <button id="btn2" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modal1">Ver meu QRCODE</button>
        </div>
    </div>
</div>
<script>
    document.getElementById('cpf').addEventListener('input', function(e) {
    let value = e.target.value;
    // Remove tudo que n√£o √© d√≠gito
    value = value.replace(/\D/g, '');
    
    // Limita a 11 d√≠gitos
    value = value.substring(0, 11);
    
    // Aplica a m√°scara
    value = value.replace(/(\d{3})(\d)/, '$1.$2');
    value = value.replace(/(\d{3})(\d)/, '$1.$2');
    value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
    
    // Atualiza o valor no campo
    e.target.value = value;
});

document.getElementById('cpf').addEventListener('keypress', function(e) {
    // Permite apenas n√∫meros
    if (!/\d/.test(String.fromCharCode(e.keyCode))) e.preventDefault();
});
</script>
<meta name="ac:route" content="/">