<!-- Wappler include head-page="layouts/mobile-portaria" fontawesome_5="cdn" bootstrap5="local" is="dmx-app" id="inicialcolaborador" appConnect="local" components="{dmxBootstrap5Offcanvas:{},dmxFormatter:{},dmxDataTraversal:{}}" -->


<dmx-serverconnect id="usuario_logado" url="/api/colaborador/identificar-colaborador"></dmx-serverconnect>
<dmx-data-detail id="data_detail_veiculo" dmx-bind:data="usuario_logado.data.query_acesso_veiculo" key="id_veiculo"></dmx-data-detail>
<div class="offcanvas offcanvas-start" id="offcanvas_qrcode" is="dmx-bs5-offcanvas" tabindex="-1">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title">Meu QR Code</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body text-center">
        <img dmx-bind:src="'data:image/png;base64,' + usuario_logado.data.query_colaborador.base64" class="img-fluid qr-code-image mb-3" alt="QR Code de Acesso">
        <h5 class="text-start">Nome: {{usuario_logado.data.query_colaborador.nome_colaborador}}</h5>
        <h5 class="text-start">CPF: {{data_detail_veiculo.data.cpf_colaborador}}</h5>
    </div>
</div>

<div class="offcanvas offcanvas-start" id="offcanvas_veiculos" is="dmx-bs5-offcanvas" tabindex="-1">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title">Meu veículo</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body text-center">
        <img dmx-bind:src="'data:image/png;base64,'+data_detail_veiculo.data.base64_veiculo" class="img-fluid qr-code-image mb-4" alt="QR Code de Acesso">
        <h5 class="text-start">Veículo: {{data_detail_veiculo.data.modelo_veiculo}}</h5>
        <h5 class="text-start">Placa: {{data_detail_veiculo.data.placa_veiculo}}</h5>
        <h5 class="text-start">Cor: {{data_detail_veiculo.data.cor_veiculo}}</h5>
    </div>
</div>
<div class="container-fluid px-4">
    <div class="row align-items-center gy-3">
        <div class="col-12">
            <h3 class="text-start" id="usuario">Bem-vindo(a) {{usuario_logado.data.query_colaborador.nome_colaborador.split(' ').first()}}</h3>
        </div>
        <div class="col-12 p-3 rounded-3 text-center border">
            <i class="fas fa-qrcode text-dark fa-2x mb-3"></i>
            <h4 class="mb-3">Meu QR Code</h4>
            <button id="btn1" class="btn w-100 btn-primary" data-bs-toggle="offcanvas" data-bs-target="#offcanvas_qrcode">Exibir QR Code</button>
        </div>
        <div class="col-12 p-3 rounded-3 text-center border">
            <i class="fas fa-car fa-2x mb-3"></i>
            <h4 class="mb-3">Meus veículos</h4>
            <select id="select1" class="form-select mb-3" dmx-bind:options="usuario_logado.data.query_acesso_veiculo" optionvalue="id_veiculo" optiontext="modelo_veiculo+' - '+placa_veiculo">
                <option value="">Selecione</option>
            </select>
            <button id="btn2" class="btn btn-primary w-100" dmx-on:click="data_detail_veiculo.select(select1.selectedValue);offcanvas_veiculos.show()">Selecionar Veículo</button>
        </div>
    </div>
</div>
<meta name="ac:route" content="/colaborador/f/">